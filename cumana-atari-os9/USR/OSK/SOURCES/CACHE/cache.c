/* * CACHE: Programm zum an- und abschalten des HyperCache. * * Copyright (c) 1989 by reccoware systems, Puchheim. * */#include <stdio.h>#define TRUE  1#define FALSE 0/* * m a i n */main(argc, argv)  int  argc;  char *argv[];{  int i, j;  int enable = FALSE, disable = FALSE;  _utinit(4);     /* Trap #4 initialisieren */    if (argc == 1) {    /* wenn keine Argumente, dann nur Anzeige */    printf("Cache is %sabled\n", cache_get() ? "en" : "dis");    exit(0);  }  for (i = 1; i < argc; i++)    if (argv[i][0] == '-')      for (j = 1; j < strlen(argv[i]); j++)        switch (tolower(argv[i][j])) {          case '?':     /* Hilfe */            usage();            exit(1);          case 'e':     /* Cache einschalten */            enable = TRUE;            break;          case 'd':     /* Cache abschalten */            disable = TRUE;            break;          default:      /* Fehler */            usage();            exit(_errmsg(1, "Unknown option '%c'\n", argv[i][j]));        }    else {      usage();      exit(_errmsg(1, "No parameters recognized\n"));    }  if (!enable && !disable) {    usage();    exit(_errmsg(1, "No options given\n"));  }    if (enable && disable) {    usage();    exit(_errmsg("Options conflict: -e/-d\n"));  }    if (enable)    cache_set();    /* Cache einschalten */  if (disable)    cache_clear();  /* Cache abschalten */  printf("Cache is %sabled\n", cache_get() ? "en" : "dis");  exit(0);}/* * u s a g e */int usage(){  fputs("Syntax: cache [<opts>]\n", stderr);  fputs("Function: Show hypercache status, enable, disable it\n", stderr);  fputs("Options:\n", stderr);  fputs("     -e    enable cache\n", stderr);  fputs("     -d    disable cache\n", stderr);}