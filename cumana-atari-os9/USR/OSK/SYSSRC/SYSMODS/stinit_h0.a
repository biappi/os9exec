 nam Init: OS-9 Configuration Module********************************* Edition History*  #   Date		Comments													by* -- -------- ------------------------------------------------------------- ---* 00 12-01-83 Initial test version developed.								rfd* 01 01-20-84 Added code to process startup file.							rfd* 02 11-01-84 Changed names and added new information.						rfd* 03 12-20-84 Changed slice value from 1 to 2.								rfd* 04 06-21-85 Minor changes for V1.2.										rfd*				---- OS-9/68k V1.2 released ----* 05 08-23-85 Added entries for M$BlkSiz and M$MinBlk.						rfd* 06 01-31-86 Removed M$BlkSiz and M$MinBlk.								rfd*             Added SysParam string.										rfd* 07 09-11-86 changed names to 2.0.											rfd* 08 09-25-86 Added M$Compat byte for smoothing port problems.				rfd* 09 10-03-86 Made OS9Rev string configurable by systype.					rfd*				---- OS-9/68k V2.0 released ----* 10 05-11-87 Removed SPU & UsrAct; added ifdef Extens.						rfd* 11 05-26-87 Added Compat bit definitions.									rfd*				---- OS-9/68k V2.1 released ----* 12 10-21-87 Updated for 2.2 release.										rfd*				---- OS-9/68k V2.2 released ----* 13 04-28-88 Added memlist definitions.									rfd* 14 06-13-88 Changed memlist table format.									rfd* 15 07-18-88 Added IP_ID.													rfd* 16 08-19-88 Remove obsolete memory definitions.							rfd* 17 10-06-88 Added ZapMem compat bit definition.							rfd* 18 11-02-88 Added IRQ stack size word.									rfd* 19 03-18-89 Added _INITMOD definition and comments.						wwb* 20 03-31-89 Added NoClock definition.										rfd*				---- OS-9/68k V2.3 released ----Edition equ 20 current edition numberTyp_Lang set (Systm<<8)+0Attr_Rev set (ReEnt<<8)+0 psect init,Typ_Lang,Attr_Rev,Edition,0,0* Configuration constants (default; changable in "systype.d" file)** Constants that use VALUES (e.g. CPUTyp set 68020) may appear anywhere* in the "systype.d" file.* Constants that use LABELS (e.g. Compat set ZapMem) MUST appear OUTSIDE* the CONFIG macro and must be conditionalized such that they are* only invoked when this file (init.a) is being assembled.* If they are placed inside the CONFIG macro, then the over-ride will not* take effect.* If they are placed outside the macro and not conditionalized then* "illegal external reference" errors will result when making other files.* The label _INITMOD provides the mechanism to ensure that the desired* operations will result.** example systype.d setup:** CONFIG macro**  endm*  Slice set 10*  ifdef _INITMOD* Compat set ZapMem patternize memory*  endc** flag reading init module (so that local labels can be over-ridden)_INITMOD equ 1 flag reading init moduleCPUTyp	set 68000	cpu type (68008/68000/68010)Level	set 1		OS-9 Level OneVers	set 2		Version 2.3Revis	set 3Edit	set 1		EditionIP_ID	set 0		interprocessor identification codeSite	set 0		installation site codeMDirSz	set 128		initial module directory size (unused)PollSz	set 32		IRQ polling table size (fixed)DevCnt	set 64		device table size (fixed)Procs	set 64		initial process table size (divisible by 64)Paths	set 64		initial path table size (divisible by 64)Slice	set 2		ticks per time sliceSysPri	set 128		initial system priorityMinPty	set 1		initial system minimum executable priorityMaxAge	set 0		initial system maximum natural age limitMaxMem	set 0		top of RAM (unused)Events	set 0		initial event table size (divisible by 8)Compat	set 0		version smoothing byteStackSz	set 1024	IRQ Stack Size in bytes (must be 1k <= StackSz < 256k)ColdRetrys set 0	number of retries for coldstart's "chd" before failing* Compat flag bit definitionsSlowIRQ	equ 1		xxxxxxx1 save all regs during IRQ processingNoStop	equ 1<<1	xxxxxx1x don't use 'stop' instructionNoGhost	equ 1<<2	xxxxx1xx don't retain Ghost memory modulesNoBurst	equ 1<<3	xxxx1xxx don't enable 68030 cache burst modeZapMem	equ 1<<4	xxx1xxxx wipe out memory that is allocated/freedNoClock equ 1<<5	xx1xxxxx don't start system clock during coldstart use defsfile (any above definitions may be overridden in defsfile)* Memory list definitionsMemType macro dc.w \1,\2,\3,\4>>4	type, priority, access, search block size dc.l \5,\6				low, high limits (where it appears on local address bus) dc.w \7,0				offset to description string (zero if none), reserved dc.l \8,0,0			address translation adjustment (for DMA, etc.), reserved ifne \#-8  must have exactly eight arguments   fail wrong number of arguments to MemType macro endc endm* Configuration module body dc.l MaxMem (unused) dc.w PollSz IRQ polling table  dc.w DevCnt device table size dc.w Procs initial process table size dc.w Paths initial path table size dc.w SysParam parameter string for first executable module dc.w SysStart first executable module name offset dc.w SysDev system default device name offset dc.w ConsolNm standard I/O pathlist name offset dc.w Extens Customization module name offset dc.w ClockNm clock module name offset dc.w Slice number of ticks per time slice dc.w IP_ID interprocessor identification dc.l Site installation site code dc.w MainFram installation name offset dc.l CPUTyp specific 68000 family processor in use dc.b Level,Vers,Revis,Edit OS-9 Level dc.w OS9Rev OS-9 revision string offset dc.w SysPri initial system priority dc.w MinPty initial system minimum executable priority dc.w MaxAge maximum system natural age limit dc.l MDirSz module directory size (unused) dc.w Events initial event table size (number of entries) dc.b Compat version change smooth byte dc.b 0 dc.w MemList memory definitions dc.w StackSz/4 IRQ stack size (in longwords) dc.w ColdRetrys coldstart's "chd" retry count dc.w 0,0,0,0,0 reserved dc.w 0,0,0,0,0 reserved* Configuration name stringsOS9Rev dc.b "OS-9/68K V",Vers+'0',".",Revis+'0',0* The remaining names are defined in the "systype.d" macro CONFIG_H0  ifndef ExtensExtens dc.b "OS9P2 OS9ACC",0 endc ifndef MemListMemList	equ 0 endc ends